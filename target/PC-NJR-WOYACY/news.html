<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="keywords" content="味捷餐饮旗下品牌。牛家人大碗牛肉面，新鲜不过夜！">
    <meta name="description" content="味捷餐饮旗下品牌。牛家人大碗牛肉面，新鲜不过夜！">
    <title>新闻资讯</title>
    <link rel=icon type=image/x-icon href=public/favicon.ico>
    <!-- 重置页面 -->
    <link rel="stylesheet" href="css/base.css">
    <!-- 当页面的css -->
    <link rel="stylesheet" href="css/news.css">
    <link rel="stylesheet" href="css/common.css">
    <!-- layui.css -->
    <link rel="stylesheet" href="lib/layui/css/layui.css">
    <!-- swiper -->
    <link href="https://cdn.bootcss.com/Swiper/4.5.0/css/swiper.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./lib/pagination/pagination.css">
    <!-- axios -->
    <script src="https://cdn.bootcss.com/axios/0.19.0/axios.min.js"></script>
    <!-- vue -->
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <script src="https://cdn.bootcss.com/element-ui/2.12.0/index.js"></script>
    <script src="https://pv.sohu.com/cityjson?ie=utf-8"></script>
</head>
<body>

<div id="news">
    <!-- 导航 -->
    <header>
        <div class="w">
            <h1 class="">
                <a href="/">
                    <img src="images/common/logo.png" alt="">
                </a>
            </h1>

            <ul class="layui-nav tab-nav" lay-filter="">
                <li class="layui-nav-item">
                    <a href="/">
                        <span>首页</span>
                        <span>HOME</span>
                    </a>
                </li>
                <li class="layui-nav-item">
                    <a href="/introduce.html">
                        <span>关于我们</span>
                        <span>ABOUT US</span>
                    </a>
                    <dl class="layui-nav-child"> <!-- 二级菜单 -->
                        <dd><a href="./introduce.html">公司介绍</a></dd>
                        <dd><a href="./introduce.html">品牌实力</a></dd>
                        <dd><a href="./introduce.html">企业荣誉</a></dd>
                    </dl>
                </li>
                <li class="layui-nav-item">
                    <a href="/product1.html">
                        <span>产品展示</span>
                        <span>PRODUCT</span>
                    </a>
                </li>
                <li class="layui-nav-item">
                    <a href="/join.html">
                        <span>招商加盟</span>
                        <span>PROMOTION</span>
                    </a>
                </li>
                <li class="layui-nav-item layui-this">
                    <a href="/news.html">
                        <span>新闻资讯</span>
                        <span>NEWS</span>
                    </a>
                    <dl class="layui-nav-child"> <!-- 二级菜单 -->
                        <dd><a href="./introduce.html">牛家人动态</a></dd>
                        <dd><a href="./introduce.html">行业资讯</a></dd>
                    </dl>
                </li>
                <li class="layui-nav-item">
                    <a href="/contact.html">
                        <span>联系我们</span>
                        <span>CONTACT</span>
                    </a>
                </li>
            </ul>
        </div>
    </header>

    <div class="banner">
        <img src="./images/news/banner01.png" alt="">
    </div>


    <!-- 面包屑 -->
    <div class="bread">
        <div class="w">
            <span>当前位置：</span>
            <ul ref="newsNav">
                <li data-type="0" @click="addCurrent($event);getNews(20)" class="current">牛家人资讯</li>
                <li data-type="1" @click="addCurrent($event);getNews(20)">行业动态</li>
            </ul>
        </div>
    </div>

    <!-- 主体 -->
    <main>
        <div class="w clearfix">
            <h2></h2>
            <div class="news-left fl">
                <ul class="newsList">
                    <li v-for="item in renderList.slice((paging.page - 1) * paging.pageSize, paging.page * paging.pageSize)"
                        :key="item.uidpk">
                        <a :href="'/newsInfo.html?id='+item.uidpk">
                            <img :src="item.articleThumbnailBean.thumbnailurl" alt="">
                            <div class="news-word">
                                <h3>{{ item.title }}</h3>
                                <p>{{ item.description | slh(65) }}</p>
                                <p>{{ item.createTime | getTime() }}</p>
                            </div>
                        </a>
                    </li>
                </ul>
                <el-pagination
                        layout="prev, pager, next"
                        :total=renderList.length
                        hide-on-single-page
                        @size-change="handleSizeChange"
                        @current-change="handleCurrentChange"
                        :current-page="paging.page"
                        :page-size="paging.pageSize"
                        next-text="下一页"
                        prev-text="上一页"
                >

                </el-pagination>
            </div>
            <div class="news-right fr">
                <ul>
                    <li :data-uidpk="item.uidpk" v-for="item in randomNewsList.slice(0,2)" :key="item.uidpk">
                        <a :href="'/newsInfo.html?id='+item.uidpk">
                            <img :src="item.articleThumbnailBean.thumbnailurl" alt="">
                            <p>{{ item.title }}</p>
                        </a>
                    </li>
                </ul>
            </div>
        </div>

    </main>


    <footer>
        <div class="w">
            <h2 class="footer-logo">
                <a href="/">
                    <img src="./images/common/footer_logo.png" alt="">
                </a>
            </h2>

            <div class="footer-nav">
                <h2 class="footer-title">网址导航</h2>
                <div class="line"></div>
                <ul>
                    <li>
                        <a href="/">首页</a>
                    </li>
                    <li>
                        <a href="introduce.html">
                            关于我们
                        </a>
                    </li>
                    <li>
                        <a href="product1.html">
                            产品展示
                        </a>
                    </li>
                    <li>
                        <a href="join.html">
                            招商加盟
                        </a>
                    </li>
                    <li>
                        <a href="news.html">
                            新闻资讯
                        </a>
                    </li>
                    <li>
                        <a href="contact.html">
                            联系我们
                        </a>
                    </li>
                </ul>
            </div>

            <div class="footer-contact">
                <h2 class="footer-title">联系方式</h2>
                <div class="line"></div>
                <div class="phone contact-box">
                    <img src="images/common/phone.png" alt="">
                    <p>
                        <span>客服热线</span>
                        <span>400-897-0200</span>
                    </p>
                </div>
                <div class="address contact-box">
                    <img src="./images/common/address.png" alt="">
                    <p>
                        <span>公司地址</span>
                        <span>浙江省杭州市滨江区龙威大厦20楼</span>
                    </p>
                </div>
                <div class="address contact-box">
                    <img src="" alt="">
                    <p>
                        <span>投资有风险，加盟需谨慎！</span>
                        <span>杭州味捷品牌管理集团有限公司</span>
                        <span><a rel="nofollow" target="_blank" href="http://beian.miit.gov.cn/" style="color: #c9c9c9;margin-top: 10px;">备案号：浙ICP备17052793号</a></span>
                    </p>
                </div>
            </div>

            <div class="footer-qrcode">
                <h2 class="footer-title">联系方式</h2>
                <div class="line"></div>
                <img src="./images/common/footer_qrcode.png" alt="">
            </div>

        </div>
    </footer>
</div>

<script>
    var app = new Vue({
        el: "#news",
        data() {
            return {
                // // 分页设置
                paging: {
                    // 当前页数
                    page: 1,
                    // 每页条数
                    pageSize: 8,
                    // 总页数
                    total: 1,
                },
                renderList: [],
                randomNewsList: [],
            }
        },
        methods: {
            // 添加类名
            addCurrent(e) {
                this.$refs.newsNav.querySelectorAll("li").forEach(item => item.classList.remove("current"))
                e.target.classList.add("current")
                this.paging.page = 1
            },
            // 获取数据
            async getNews(type) {
                const res = await axios.get(`https://manage.zhou-yuanwai.com/comprehens/journalism.do?uidpk=20`)
                console.log(res)
                if (res.status === 200) {
                    // const arr = this.group(res.data)
                    // // console.log(arr)
                    // this.newsList1 = arr[0]
                    // this.newsList2 = arr[1]
                    // this.renderList = this.newsList1
                    this.renderList = res.data
                }
            },
            // 获取随机新闻
            async getRandomNews() {
                const res = await axios.get("https://manage.zhou-yuanwai.com/comprehens/random.do")
                console.log(res.data)
                if (res.status === 200) {
                    this.randomNewsList = res.data
                }
            },
            // 数组的分组 一分为二
            // group(array) {
            //     let arr1 = [];
            //     let arr2 = [];
            //     let arr = []
            //     array.forEach((item, index, valArr) => {
            //         if (index <= parseInt((array.length) / 2)) {
            //             arr1.push(item)
            //         } else {
            //             arr2.push(item)
            //         }
            //     })
            //     arr.push(arr1, arr2)
            //     return arr
            //     // console.log(arr)
            // },
            // 切换显示的数组
            tabNews(type) {
                // console.log(type);
                if (type === 0) {
                    this.renderList = this.newsList1
                } else if (type === 1) {
                    this.renderList = this.newsList2
                }
                // 将当前分类存入session
                sessionStorage.setItem("type",type)
            },
            // 页码改变
            handleSizeChange() {

            },

            //
            handleCurrentChange(val) {
                this.paging.page = val;
                // console.log(this.paging.page)
                // console.log(this.paging)
                // this.getData()
                document.documentElement.scrollTop = "496"
            },
        },
        filters: {
            // 超过字数变成省略号
            slh: function (value, wordLimit) {
                // var str = $(textName).html()
                // console.log(str)
                // var subStr = str.substring(0, wordLimit)
                // // console.log(subStr)
                // $(textName).html(subStr + (str.length > wordLimit ? "..." : ""))
                let subStr = value.substring(0, wordLimit)
                let newSubStr = subStr + (value.length > wordLimit ? "..." : "")
                return newSubStr
            },
            // 格式化时间
            getTime: function (dataStr, pattern = "YYYY-MM-DD") {
                return moment(dataStr).format(pattern);
            },
        },
        created() {
            this.getNews(1)
            this.getRandomNews()
        },
        mounted() {
            // 将当前分类存入session
            sessionStorage.setItem("type",0)
        }
    })
</script>

<!-- jq -->
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<!-- layui.js -->
<script src="lib/layui/layui.js"></script>
<!-- monent -->
<script src="lib/moment/moment.min.js"></script>
<!-- swiper -->
<script src="https://cdn.bootcss.com/Swiper/4.5.0/js/swiper.min.js"></script>
<script src="js/index/index.js"></script>
<script src="js/pages/forbid.js"></script>
<!--<script src="js/pages/news.js"></script>-->

<!--<script>-->
<!--layui.use('laypage', function(){-->
<!--var laypage = layui.laypage;-->

<!--//执行一个laypage实例-->
<!--laypage.render({-->
<!--elem: 'newsList' //注意，这里的 test1 是 ID，不用加 # 号-->
<!--,count: 50 //数据总数，从服务端得到-->
<!--,limit:10-->
<!--});-->
<!--});-->
<!--</script>-->

</body>
</html>


<script language=javascript>
    var LiveReceptionCode_chatexplain_online='';
    LiveReceptionCode_chatexplain_online=escape(LiveReceptionCode_chatexplain_online);
</script>
<script language="javascript" src="http://pyt.zoosnet.net/JS/LsJS.aspx?siteid=PYT62454332&float=1&lng=cn"></script>


